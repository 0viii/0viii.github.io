<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mi Netflix Ultra Pro</title>
<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background-color: #111;
    color: #fff;
}
h1 {
    margin: 20px;
    text-align: center;
    font-size: 2.2em;
}
#filtros {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-bottom: 20px;
}
#catalogo {
    display: flex;
    overflow-x: auto;
    gap: 15px;
    padding: 20px;
}
.card {
    position: relative;
    min-width: 220px;
    transition: transform 0.3s;
    cursor: pointer;
    border-radius: 8px;
    overflow: hidden;
}
.card img, .card video {
    width: 100%;
    display: block;
    border-radius: 8px;
}
.card:hover { transform: scale(1.15); z-index:2;}
.card h3 {
    position: absolute;
    bottom: 5px;
    left: 5px;
    margin: 0;
    background: rgba(0,0,0,0.6);
    padding: 5px 8px;
    border-radius: 4px;
    font-size: 1em;
}
.fav {
    position: absolute;
    top: 8px;
    right: 8px;
    font-size: 28px;
    color: yellow;
    cursor: pointer;
    transition: transform 0.3s;
}
.fav:hover { transform: scale(1.3);}
#player-container {
    position: fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background: rgba(0,0,0,0.95);
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    display: none;
    z-index: 100;
}
#player { width: 85%; max-width: 1000px; border-radius: 10px; }
#cerrar {
    margin-bottom: 10px;
    padding: 10px 20px;
    background: #e50914;
    border: none;
    color: #fff;
    font-weight: bold;
    cursor: pointer;
    border-radius: 5px;
    transition: background 0.3s;
}
#cerrar:hover { background: #b00710; }
::-webkit-scrollbar { height: 10px; }
::-webkit-scrollbar-thumb { background: #e50914; border-radius: 5px; }
::-webkit-scrollbar-track { background: #222; border-radius: 5px; }
</style>
</head>
<body>

<h1>Mi Netflix Ultra Pro</h1>

<div id="filtros">
    <input type="text" id="buscar" placeholder="Buscar película..." />
    <select id="categoria">
        <option value="todas">Todas las categorías</option>
    </select>
</div>

<div id="catalogo"></div>

<div id="player-container">
    <button id="cerrar">Cerrar</button>
    <video id="player" controls></video>
</div>

<script>
const peliculas = [
    { titulo: "Película 1", categoria: "Acción", portada: "images/pelicula1.jpg", trailer:"videos/trailer1.mp4", video: "videos/pelicula1.mp4" },
    { titulo: "Película 2", categoria: "Drama", portada: "images/pelicula2.jpg", trailer:"videos/trailer2.mp4", video: "videos/pelicula2.mp4" },
    { titulo: "Película 3", categoria: "Comedia", portada: "images/pelicula3.jpg", trailer:"videos/trailer3.mp4", video: "videos/pelicula3.mp4" }
];

const catalogo = document.getElementById("catalogo");
const playerContainer = document.getElementById("player-container");
const player = document.getElementById("player");
const cerrar = document.getElementById("cerrar");
const buscar = document.getElementById("buscar");
const categoriaSelect = document.getElementById("categoria");

let favoritos = JSON.parse(localStorage.getItem("favoritos")) || [];

function mostrarCatalogo() {
    catalogo.innerHTML = "";
    const busqueda = buscar.value.toLowerCase();
    const categoria = categoriaSelect.value;

    peliculas.forEach(p => {
        if((p.titulo.toLowerCase().includes(busqueda)) && (categoria === "todas" || p.categoria === categoria)){
            const card = document.createElement("div");
            card.className = "card";
            card.innerHTML = `
                <img src="${p.portada}" alt="${p.titulo}">
                <video src="${p.trailer}" muted loop style="display:none;"></video>
                <span class="fav">${favoritos.includes(p.titulo) ? "★" : "☆"}</span>
                <h3>${p.titulo}</h3>
            `;

            const img = card.querySelector("img");
            const vid = card.querySelector("video");
            const fav = card.querySelector(".fav");

            // Hover trailer
            card.addEventListener("mouseenter", () => { img.style.display="none"; vid.style.display="block"; vid.play(); });
            card.addEventListener("mouseleave", () => { vid.pause(); vid.style.display="none"; img.style.display="block"; });

            card.addEventListener("click", (e) => {
                if(e.target === fav){
                    toggleFavorito(p.titulo, fav);
                } else {
                    player.src = p.video;
                    playerContainer.style.display = "flex";
                    player.play();
                }
            });

            catalogo.appendChild(card);
        }
    });
}

function toggleFavorito(titulo, elemento){
    if(favoritos.includes(titulo)){
        favoritos = favoritos.filter(f => f !== titulo);
        elemento.textContent = "☆";
    } else {
        favoritos.push(titulo);
        elemento.textContent = "★";
    }
    localStorage.setItem("favoritos", JSON.stringify(favoritos));
}

cerrar.addEventListener("click", () => {
    player.pause();
    playerContainer.style.display = "none";
});

// Categorías automáticas
const categorias = ["todas", ...new Set(peliculas.map(p=>p.categoria))];
categorias.forEach(cat => {
    if(cat !== "todas"){
        const opt = document.createElement("option");
        opt.value = cat;
        opt.textContent = cat;
        categoriaSelect.appendChild(opt);
    }
});

buscar.addEventListener("input", mostrarCatalogo);
categoriaSelect.addEventListener("change", mostrarCatalogo);

mostrarCatalogo();
</script>

</body>
</html>
