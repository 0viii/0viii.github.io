<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MiniHost 🌍 - Minecraft Panel</title>
<style>
  /* ===== Estilos Generales ===== */
  body {
    font-family: 'Minecraft', Arial, sans-serif;
    background: linear-gradient(120deg, #1b2735, #090a0f);
    color: white;
    text-align: center;
    padding: 20px;
  }
  h1 { font-size: 3em; margin-bottom: 5px; color:#00ff00; }
  p { font-size:1.2em; margin-bottom: 20px; }
  
  /* ===== Tarjetas ===== */
  .card {
    background: rgba(0,0,0,0.7);
    border: 4px solid #00ff00;
    border-radius: 12px;
    padding: 20px;
    margin: 15px auto;
    max-width: 450px;
    box-shadow: 0px 6px 15px rgba(0,0,0,0.5);
    transition: transform 0.3s, box-shadow 0.3s;
  }
  .card:hover {
    transform: translateY(-5px);
    box-shadow: 0px 8px 20px rgba(0,255,0,0.5);
  }

  /* ===== Inputs y botones ===== */
  input, select, button {
    padding: 10px;
    margin: 8px;
    border-radius: 5px;
    border: none;
    outline: none;
    width: 80%;
    font-weight: bold;
  }
  select { width: 85%; }
  button {
    cursor: pointer;
    font-weight: bold;
  }
  .btn-create { background:#00c853; color:white; }
  .btn-create:hover { background:#009624; }
  .btn-power { background:#ff9800; color:black; margin-top:5px; }
  .btn-power:hover { background:#f57c00; }
  .btn-delete { background:#d50000; color:white; margin-top:5px; }
  .btn-delete:hover { background:#9b0000; }

  /* ===== Servidores ===== */
  .server-card {
    background: rgba(255,255,255,0.1);
    margin: 12px auto;
    padding: 15px;
    border-radius: 10px;
    text-align: left;
    transition: background 0.3s;
  }
  .server-card:hover { background: rgba(255,255,255,0.2); }

  /* ===== Logout ===== */
  .logout-btn {
    background: #d50000; width: 50%; margin-top: 15px;
  }
  .logout-btn:hover { background: #9b0000; }

  /* ===== Notificaciones ===== */
  #notification {
    position: fixed;
    top: 20px;
    right: 20px;
    background:#00ff00;
    color:black;
    padding:10px 15px;
    border-radius:8px;
    display:none;
    font-weight:bold;
    box-shadow:0px 4px 10px rgba(0,255,0,0.5);
  }
</style>
</head>
<body>
<h1>MiniHost 🌍</h1>
<p>¡Crea y gestiona tus servidores de Minecraft!</p>

<div class="card" id="auth-card">
  <h2>Iniciar Sesión</h2>
  <input type="text" id="username" placeholder="Usuario"><br>
  <input type="password" id="password" placeholder="Contraseña"><br>
  <button class="btn-create" onclick="login()">Entrar</button>
  <p>¿No tienes cuenta? <a href="#" onclick="register()">Regístrate</a></p>
</div>

<div class="card" id="panel" style="display:none;">
  <h2>Bienvenido, <span id="user"></span> 👋</h2>

  <h3>Crear nuevo servidor</h3>
  <input type="text" id="serverName" placeholder="Nombre del servidor"><br>
  <select id="mcVersion">
    <option value="1.20.1">1.20.1</option>
    <option value="1.19.4">1.19.4</option>
    <option value="1.18.2">1.18.2</option>
  </select><br>
  <select id="gameMode">
    <option value="Survival">Survival</option>
    <option value="Creative">Creative</option>
    <option value="Adventure">Adventure</option>
  </select><br>
  <input type="number" id="slots" placeholder="Cantidad de jugadores" min="1" max="50"><br>
  <button class="btn-create" onclick="createServer()">🚀 Crear servidor</button>

  <h3 style="margin-top:30px;">Tus servidores</h3>
  <div id="serverList"></div>

  <button class="logout-btn" onclick="logout()">Cerrar sesión</button>
</div>

<div id="notification"></div>

<script>
function notify(msg, color="#00ff00"){
  let n = document.getElementById("notification");
  n.style.background=color; n.innerText=msg;
  n.style.display="block";
  setTimeout(()=>{ n.style.display="none"; },2500);
}

// Registro/Login con localStorage
function register() {
  let user = document.getElementById("username").value;
  let pass = document.getElementById("password").value;
  if(user && pass){
    if(localStorage.getItem("user_" + user)) return notify("Usuario ya existe","#ff9800");
    localStorage.setItem("user_" + user, pass);
    localStorage.setItem("servers_" + user, JSON.stringify([]));
    notify("Usuario registrado con éxito");
  } else { notify("Completa usuario y contraseña","#ff9800"); }
}

function login() {
  let user = document.getElementById("username").value;
  let pass = document.getElementById("password").value;
  let savedPass = localStorage.getItem("user_" + user);
  if(savedPass && savedPass===pass){
    localStorage.setItem("loggedUser", user);
    showPanel(user);
    notify("Sesión iniciada ✔️");
  } else { notify("Usuario o contraseña incorrectos","#ff9800"); }
}

function showPanel(user){
  document.getElementById("auth-card").style.display="none";
  document.getElementById("panel").style.display="block";
  document.getElementById("user").innerText=user;
  renderServers();
}

function createServer(){
  let user = localStorage.getItem("loggedUser");
  if(!user) return;
  let name = document.getElementById("serverName").value || "MiServidor";
  let version = document.getElementById("mcVersion").value;
  let mode = document.getElementById("gameMode").value;
  let slots = document.getElementById("slots").value || 10;
  let players = Math.floor(Math.random()*slots); // jugadores aleatorios

  let server = {name, version, mode, slots, status:"🟢 Online", players};
  let servers = JSON.parse(localStorage.getItem("servers_" + user)) || [];
  servers.push(server);
  localStorage.setItem("servers_" + user, JSON.stringify(servers));
  renderServers();
  notify(`Servidor "${name}" creado!`);
}

function renderServers(){
  let user = localStorage.getItem("loggedUser");
  let listDiv = document.getElementById("serverList");
  listDiv.innerHTML="";
  let servers = JSON.parse(localStorage.getItem("servers_" + user)) || [];
  servers.forEach((s,i)=>{
    let div=document.createElement("div");
    div.className="server-card";
    div.innerHTML=`
      <b>${s.name}</b><br>
      Versión: ${s.version} | Modo: ${s.mode} | Slots: ${s.slots} | Jugadores: ${s.players} | Estado: ${s.status}
      <br>
      <button class="btn-power" onclick="toggleServer(${i})">Encender/Apagar</button>
      <button class="btn-delete" onclick="deleteServer(${i})">🗑 Eliminar</button>
    `;
    listDiv.appendChild(div);
  });
}

function toggleServer(index){
  let user = localStorage.getItem("loggedUser");
  let servers = JSON.parse(localStorage.getItem("servers_" + user)) || [];
  let s = servers[index];
  if(s.status==="🟢 Online"){
    s.status="🔴 Offline"; s.players=0;
    notify(`Servidor "${s.name}" apagado`,"#ff9800");
  } else {
    s.status="🟢 Online"; s.players=Math.floor(Math.random()*s.slots);
    notify(`Servidor "${s.name}" encendido`);
  }
  servers[index]=s;
  localStorage.setItem("servers_" + user, JSON.stringify(servers));
  renderServers();
}

function deleteServer(index){
  let user = localStorage.getItem("loggedUser");
  let servers = JSON.parse(localStorage.getItem("servers_" + user)) || [];
  notify(`Servidor "${servers[index].name}" eliminado`,"#ff9800");
  servers.splice(index,1);
  localStorage.setItem("servers_" + user, JSON.stringify(servers));
  renderServers();
}

function logout(){
  localStorage.removeItem("loggedUser");
  document.getElementById("panel").style.display="none";
  document.getElementById("auth-card").style.display="block";
  notify("Sesión cerrada","#ff9800");
}

// Mantener sesión
window.onload=()=>{
  let loggedUser = localStorage.getItem("loggedUser");
  if(loggedUser) showPanel(loggedUser);
}
</script>
</body>
</html>
