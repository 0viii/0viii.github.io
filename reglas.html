<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MiniDavid PRO</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body {
  font-family: 'Roboto', sans-serif;
  background: linear-gradient(135deg, #121212, #1c1c1c);
  color:#fff;
  transition: background 0.8s ease;
}
.sidebar {
  position: fixed; left:0; top:0; bottom:100px;
  width:220px; background-color:#000; padding:20px;
  display:flex; flex-direction:column; border-right:1px solid #282828;
}
.sidebar h2 { color:#1DB954; margin-bottom:40px; font-size:28px; text-align:center; }
.sidebar a { color:#b3b3b3; text-decoration:none; margin-bottom:20px; font-weight:bold; font-size:16px; display:flex; align-items:center; gap:10px; }
.sidebar a:hover { color:#fff; }
.main { margin-left:240px; padding:30px; }
.section-title { margin-bottom:15px; font-size:22px; font-weight:bold; }
.song-list { margin-top:20px; max-height:calc(100vh - 150px); overflow-y:auto; }
.song { display:flex; justify-content:space-between; padding:12px 15px; border-radius:10px; margin-bottom:10px; cursor:pointer; background-color:#181818; transition:0.3s; }
.song:hover { background-color:#282828; transform:translateY(-3px); box-shadow:0 4px 10px rgba(0,0,0,0.5); }
.player {
  position:fixed; bottom:0; left:0; right:0; height:120px;
  background-color:#181818; display:flex; justify-content:space-between; align-items:center; padding:10px 20px; border-top:1px solid #282828; gap:10px; flex-wrap:wrap;
}
.player-left { display:flex; align-items:center; gap:10px; }
.player-left img { width:50px; height:50px; border-radius:8px; }
.player-info p:first-child { font-weight:bold; font-size:14px; }
.player-info p:last-child { font-size:12px; color:#b3b3b3; }
.player-center { display:flex; align-items:center; gap:10px; flex:1; }
.player-center button { background:none; border:none; color:#fff; font-size:18px; cursor:pointer; transition:0.2s; }
.player-center button:hover { color:#1DB954; }
.progress-container { flex:1; height:6px; background:#282828; border-radius:5px; margin:0 10px; cursor:pointer; }
.progress { height:6px; background:#1DB954; width:0%; border-radius:5px; transition: width 0.1s linear; }
.player-right input[type="range"] { width:80px; cursor:pointer; }
@media(max-width:768px){
  .sidebar { position:relative; width:100%; display:flex; flex-direction:row; justify-content:space-around; padding:10px 0; border-right:none; border-bottom:1px solid #282828; }
  .sidebar h2 { display:none; }
  .main { margin-left:0; padding:15px; }
  .player-left img { width:40px; height:40px; }
  .player-info p:first-child { font-size:12px; }
  .player-info p:last-child { font-size:10px; }
  .player { flex-direction:column; height:auto; padding:10px; }
  .player-center { width:100%; margin-top:5px; }
  .player-right { margin-top:5px; }
}
</style>
</head>
<body>

<div class="sidebar">
  <h2>MiniDavid</h2>
  <a href="#">üè† Inicio</a>
  <a href="#">üîç Explorar</a>
  <a href="#">üìö Tu Biblioteca</a>
</div>

<div class="main">
  <h2 class="section-title">Canciones Destacadas</h2>
  <div class="song-list" id="songList"></div>
</div>

<div class="player">
  <div class="player-left">
    <img id="player-img" src="" alt="√Ålbum">
    <div class="player-info">
      <p id="player-song">Canci√≥n</p>
      <p id="player-artist">Artista</p>
    </div>
  </div>

  <div class="player-center">
    <button id="prev">&#9664;&#9664;</button>
    <button id="play">&#9654;</button>
    <button id="next">&#9654;&#9654;</button>
    <button id="shuffle">üîÄ</button>
    <button id="repeat">üîÅ</button>
    <div class="progress-container" id="progress-container">
      <div class="progress" id="progress"></div>
    </div>
  </div>

  <div class="player-right">
    <input type="range" id="volume" min="0" max="1" step="0.01" value="0.8">
  </div>
</div>

<div id="yt-player"></div>

<script>
let player;
let isPlaying = true;
let currentSong = 0;
let isShuffle = false;
let isRepeat = false;

// Lista de canciones con fondo din√°mico
const songs = [
  {id:'f1iiTXwcXq0', title:'LVL', artist:'A$AP Rocky', img:'https://via.placeholder.com/60', bg:'linear-gradient(135deg, #ff416c, #ff4b2b)'},
  {id:'t7aY6lJ77BM', title:'Tu Boda', artist:'Desconocido', img:'https://via.placeholder.com/60', bg:'linear-gradient(135deg, #6a11cb, #2575fc)'},
];

// Llenar lista en HTML
const songListEl = document.getElementById('songList');
songs.forEach((song,i)=>{
  const div = document.createElement('div');
  div.classList.add('song');
  div.innerHTML = `<p>${song.title}</p><p>${song.artist}</p>`;
  div.addEventListener('click', ()=>playSong(i));
  songListEl.appendChild(div);
});

// Cargar API de YouTube
var tag = document.createElement('script');
tag.src = "https://www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

// Crear reproductor
function onYouTubeIframeAPIReady() {
  player = new YT.Player('yt-player', {
    height:'0', width:'0',
    videoId:songs[currentSong].id,
    playerVars:{'autoplay':1,'controls':0,'loop':1,'playlist':songs[currentSong].id,'mute':0},
    events:{'onReady': onPlayerReady, 'onStateChange': onPlayerStateChange}
  });
}

function onPlayerReady(event){
  event.target.playVideo();
  updatePlayerInfo();
}

function playSong(index){
  currentSong = index;
  player.loadVideoById(songs[currentSong].id);
  updatePlayerInfo();
  isPlaying = true;
  document.getElementById('play').textContent='‚ùö‚ùö';
}

function updatePlayerInfo(){
  document.getElementById('player-song').innerText = songs[currentSong].title;
  document.getElementById('player-artist').innerText = songs[currentSong].artist;
  document.getElementById('player-img').src = songs[currentSong].img;
  document.body.style.background = songs[currentSong].bg;
}

// Botones play/pause
document.getElementById('play').addEventListener('click',()=>{
  if(isPlaying){ player.pauseVideo(); isPlaying=false; document.getElementById('play').textContent='‚ñ∂'; }
  else { player.playVideo(); isPlaying=true; document.getElementById('play').textContent='‚ùö‚ùö'; }
});

// Botones siguiente/anterior
document.getElementById('next').addEventListener('click', ()=>{
  if(isShuffle) playSong(Math.floor(Math.random()*songs.length));
  else playSong((currentSong+1)%songs.length);
});
document.getElementById('prev').addEventListener('click', ()=>{
  if(isShuffle) playSong(Math.floor(Math.random()*songs.length));
  else playSong((currentSong-1+songs.length)%songs.length);
});

// Botones shuffle/repeat
document.getElementById('shuffle').addEventListener('click', ()=>{
  isShuffle = !isShuffle;
  document.getElementById('shuffle').style.color = isShuffle?'#1DB954':'#fff';
});
document.getElementById('repeat').addEventListener('click', ()=>{
  isRepeat = !isRepeat;
  document.getElementById('repeat').style.color = isRepeat?'#1DB954':'#fff';
});

// Volumen
document.getElementById('volume').addEventListener('input',(e)=>player.setVolume(e.target.value*100));

// Barra de progreso
const progress = document.getElementById('progress');
const progressContainer = document.getElementById('progress-container');

function updateProgress(){
  if(player && player.getCurrentTime){
    const time = player.getCurrentTime();
    const duration = player.getDuration();
    const percent = (time/duration)*100;
    progress.style.width = percent+'%';
  }
  requestAnimationFrame(updateProgress);
}
updateProgress();

// Saltar con barra
progressContainer.addEventListener('click',(e)=>{
  const width = progressContainer.clientWidth;
  const clickX = e.offsetX;
  const duration = player.getDuration();
  player.seekTo((clickX/width)*duration,true);
});

// Cambiar de canci√≥n autom√°ticamente cuando termina
function onPlayerStateChange(event){
  if(event.data === YT.PlayerState.ENDED){
    if(isRepeat) playSong(currentSong);
    else if(isShuffle) playSong(Math.floor(Math.random()*songs.length));
    else playSong((currentSong+1)%songs.length);
  }
}
</script>

</body>
</html>
